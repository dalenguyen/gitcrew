# Dockerfile.agent â€” lightweight image for gitcrew agent containers
#
# This image provides a clean, reproducible environment for running
# AI agents and tests. It includes git and common build tools.
#
# Built by: gitcrew docker build
# Used by:  gitcrew docker test, gitcrew spawn --docker
#
# Extend this file to add your project's language runtime:
#   FROM gitcrew-agent AS base
#   RUN apt-get install -y nodejs npm

FROM ubuntu:24.04

LABEL maintainer="gitcrew" \
      description="gitcrew agent container"

# Avoid interactive prompts during build
ENV DEBIAN_FRONTEND=noninteractive

# Install essentials: git, curl, bash, gh (for pr create/review), common build tools
RUN apt-get update -qq && \
    apt-get install -y --no-install-recommends \
        git \
        curl \
        ca-certificates \
        bash \
        jq \
        make \
        gh \
    && rm -rf /var/lib/apt/lists/*

# Configure git defaults for agents
RUN git config --global init.defaultBranch main && \
    git config --global pull.rebase true

WORKDIR /workspace

# Default: run bash (overridden by spawn/docker-compose)
CMD ["bash"]
